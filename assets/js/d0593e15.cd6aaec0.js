"use strict";(self.webpackChunkfeature_probe_docs=self.webpackChunkfeature_probe_docs||[]).push([[9438],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),h=a,g=d["".concat(s,".").concat(h)]||d[h]||u[h]||o;return n?r.createElement(g,i(i({ref:t},c),{},{components:n})):r.createElement(g,i({ref:t},c))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7709:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const o={sidebar_position:6},i="Publish toggle with REST API",l={unversionedId:"tutorials/open_api",id:"tutorials/open_api",title:"Publish toggle with REST API",description:"Every FeatureProbe feature begins as an REST API. You can perform any operation in the FeatureProbe product through the REST API.",source:"@site/docs/tutorials/open_api.md",sourceDirName:"tutorials",slug:"/tutorials/open_api",permalink:"/FeatureProbe/tutorials/open_api",draft:!1,editUrl:"https://github.com/FeatureProbe/FeatureProbe/blob/main/docs/docs/tutorials/open_api.md",tags:[],version:"current",lastUpdatedAt:1676614480,formattedLastUpdatedAt:"Feb 17, 2023",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"defaultSidebar",previous:{title:"Use segment",permalink:"/FeatureProbe/tutorials/user_segment_tutorial"},next:{title:"Use metric analysis",permalink:"/FeatureProbe/tutorials/analysis"}},s={},p=[{value:"Create Access Token",id:"create-access-token",level:2},{value:"Create Toggle",id:"create-toggle",level:2},{value:"Open and publish",id:"open-and-publish",level:2}],c={toc:p};function u(e){let{components:t,...o}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"publish-toggle-with-rest-api"},"Publish toggle with REST API"),(0,a.kt)("p",null,"Every FeatureProbe feature begins as an REST API. You can perform any operation in the FeatureProbe product through the REST API."),(0,a.kt)("p",null,"Suppose we need to implement the following scenarios through the REST API:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Create a new toggle"),(0,a.kt)("li",{parentName:"ul"},"Open and publish this toggle")),(0,a.kt)("h2",{id:"create-access-token"},"Create Access Token"),(0,a.kt)("p",null,"All REST API resource access uses Access Token for authentication, no other authentication mechanisms are supported."),(0,a.kt)("p",null,"1\u3001Log in to the FeatureProbe ",(0,a.kt)("a",{parentName:"p",href:"https://featureprobe.io"},"demo platform"),". If you log in for the first time, please enter your email address. You can continue to use your email to access your data in the future."),(0,a.kt)("p",null,'2\u3001Click "Settings" at the top of the page\uff0cThen select "Access tokens" on the left \uff0cClick ',(0,a.kt)("inlineCode",{parentName:"p"},"+ Token")," button to create a new Access Token."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Fill in the name."),(0,a.kt)("li",{parentName:"ul"},'Select the "Owner" role.'),(0,a.kt)("li",{parentName:"ul"},"Click on ",(0,a.kt)("inlineCode",{parentName:"li"},"Create"),".")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"create tokken_en",src:n(4827).Z,width:"2795",height:"1502"})),(0,a.kt)("p",null,"3\u3001Copy and save the TOKEN. After the Access Token is successfully created, we need to copy and save it in the TOKEN, which will not be viewable later."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"create_success_token_en",src:n(3319).Z,width:"2795",height:"1502"})),(0,a.kt)("h2",{id:"create-toggle"},"Create Toggle"),(0,a.kt)("p",null,'By default, FeatureProbe will create a My_Project project and an online environment under the project.\nWe will demonstrate to create a "New Feature" toggle under this project.'),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Replace ${API_ACCESS_TOKEN} in the command below with the TOKEN saved above.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'curl -i \'https://featureprobe.io/api/projects/My_Project/toggles\' \\\n  -X \'POST\' \\\n  -H \'Authorization: ${API_ACCESS_TOKEN}\' \\\n  -H \'Content-Type: application/json\' \\\n  --data-raw \'{\n      "name": "New Feature",\n      "key": "new_feature",\n      "desc": "This is a feature control toggle.",\n      "tags": [],\n      "clientAvailability": true,\n      "returnType": "boolean",\n      "variations": [{\n            "value": "false",\n            "name": "Close",\n            "description": "Close new feature."\n        }, {\n            "value": "true",\n            "name": "Open",\n            "description": "Open new feature."\n        }],\n      "disabledServe": 0,\n      "permanent": false\n    }\'\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Whether the verification is successful")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"new_feature_toggle_en",src:n(2483).Z,width:"2339",height:"582"})),(0,a.kt)("h2",{id:"open-and-publish"},"Open and publish"),(0,a.kt)("p",null,"The toggle creates a default disabled state.\nNext, we will turn on this toggle through the REST API."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Replace ${API_ACCESS_TOKEN} in the command below with the TOKEN saved above.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'curl -i \'https://featureprobe.io/api/projects/My_Project/environments/online/toggles/new_feature/targeting\' \\\n  -X \'PATCH\' \\\n  -H \'Authorization: ${API_ACCESS_TOKEN}\' \\\n  -H \'Content-Type: application/json\' \\\n  --data-raw \'{\n    "comment": "Open toggle.",\n    "disabled": false,\n    "content": {\n        "defaultServe": {\n            "select": 1\n        }\n    }\n}\'\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Whether the verification is successful")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"open_new_feature_toggle_en",src:n(1293).Z,width:"2335",height:"567"})))}u.isMDXComponent=!0},3319:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/create_success_token_en-7f439d5d27e421c0c68f59e19d7ff112.png"},4827:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/create_token_en-db76a2a2c62517c0a76a6e6e13e727b8.png"},2483:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/new_feature_toggle_en-ee8b51ce0a63abdfe1e065b876f01f6b.png"},1293:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/open_new_feature_toggle_en-7b60ac67b5f62a543e53e152899e3ba1.png"}}]);