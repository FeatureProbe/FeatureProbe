"use strict";(self.webpackChunkfeature_probe_docs=self.webpackChunkfeature_probe_docs||[]).push([[9201],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>m});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),u=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(a),m=n,g=c["".concat(s,".").concat(m)]||c[m]||d[m]||l;return a?r.createElement(g,o(o({ref:t},p),{},{components:a})):r.createElement(g,o({ref:t},p))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,o=new Array(l);o[0]=c;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:n,o[1]=i;for(var u=2;u<l;u++)o[u]=a[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}c.displayName="MDXCreateElement"},5162:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(7294),n=a(6010);const l="tabItem_Ymn6";function o(e){let{children:t,hidden:a,className:o}=e;return r.createElement("div",{role:"tabpanel",className:(0,n.Z)(l,o),hidden:a},t)}},4866:(e,t,a)=>{a.d(t,{Z:()=>N});var r=a(7462),n=a(7294),l=a(6010),o=a(2466),i=a(6550),s=a(1980),u=a(7392),p=a(12);function d(e){return function(e){return n.Children.map(e,(e=>{if((0,n.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))}(e).map((e=>{let{props:{value:t,label:a,attributes:r,default:n}}=e;return{value:t,label:a,attributes:r,default:n}}))}function c(e){const{values:t,children:a}=e;return(0,n.useMemo)((()=>{const e=t??d(a);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function m(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function g(e){let{queryString:t=!1,groupId:a}=e;const r=(0,i.k6)(),l=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,s._X)(l),(0,n.useCallback)((e=>{if(!l)return;const t=new URLSearchParams(r.location.search);t.set(l,e),r.replace({...r.location,search:t.toString()})}),[l,r])]}function f(e){const{defaultValue:t,queryString:a=!1,groupId:r}=e,l=c(e),[o,i]=(0,n.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=a.find((e=>e.default))??a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:l}))),[s,u]=g({queryString:a,groupId:r}),[d,f]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,l]=(0,p.Nk)(a);return[r,(0,n.useCallback)((e=>{a&&l.set(e)}),[a,l])]}({groupId:r}),h=(()=>{const e=s??d;return m({value:e,tabValues:l})?e:null})();(0,n.useLayoutEffect)((()=>{h&&i(h)}),[h]);return{selectedValue:o,selectValue:(0,n.useCallback)((e=>{if(!m({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),f(e)}),[u,f,l]),tabValues:l}}var h=a(2389);const b="tabList__CuJ",k="tabItem_LNqP";function v(e){let{className:t,block:a,selectedValue:i,selectValue:s,tabValues:u}=e;const p=[],{blockElementScrollPositionUntilNextRender:d}=(0,o.o5)(),c=e=>{const t=e.currentTarget,a=p.indexOf(t),r=u[a].value;r!==i&&(d(t),s(r))},m=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const a=p.indexOf(e.currentTarget)+1;t=p[a]??p[0];break}case"ArrowLeft":{const a=p.indexOf(e.currentTarget)-1;t=p[a]??p[p.length-1];break}}t?.focus()};return n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":a},t)},u.map((e=>{let{value:t,label:a,attributes:o}=e;return n.createElement("li",(0,r.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>p.push(e),onKeyDown:m,onClick:c},o,{className:(0,l.Z)("tabs__item",k,o?.className,{"tabs__item--active":i===t})}),a??t)})))}function y(e){let{lazy:t,children:a,selectedValue:r}=e;if(a=Array.isArray(a)?a:[a],t){const e=a.find((e=>e.props.value===r));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return n.createElement("div",{className:"margin-top--md"},a.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==r}))))}function _(e){const t=f(e);return n.createElement("div",{className:(0,l.Z)("tabs-container",b)},n.createElement(v,(0,r.Z)({},e,t)),n.createElement(y,(0,r.Z)({},e,t)))}function N(e){const t=(0,h.Z)();return n.createElement(_,(0,r.Z)({key:String(t)},e))}},2708:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>u,toc:()=>d});var r=a(7462),n=(a(7294),a(3905)),l=a(4866),o=a(5162);const i={sidebar_position:3},s="Use Toggle to Roll out a Feature",u={unversionedId:"tutorials/rollout_tutorial/index",id:"tutorials/rollout_tutorial/index",title:"Use Toggle to Roll out a Feature",description:"We will guide you to use the FeatureProbe platform to control a back-end or front-end program, and let the back-end or front-end program display new features by percentage of received user requests.",source:"@site/docs/tutorials/rollout_tutorial/index.md",sourceDirName:"tutorials/rollout_tutorial",slug:"/tutorials/rollout_tutorial/",permalink:"/FeatureProbe/tutorials/rollout_tutorial/",draft:!1,editUrl:"https://github.com/FeatureProbe/FeatureProbe/blob/main/docs/docs/tutorials/rollout_tutorial/index.md",tags:[],version:"current",lastUpdatedAt:1706624576,formattedLastUpdatedAt:"Jan 30, 2024",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"defaultSidebar",previous:{title:"Deploy a private environment",permalink:"/FeatureProbe/tutorials/setup_own_env"},next:{title:"Stable rollout",permalink:"/FeatureProbe/tutorials/rollout_tutorial/stable_rollout_tutorial"}},p={},d=[{value:"Create a toggle on the platform",id:"create-a-toggle-on-the-platform",level:2},{value:"Control the backend program",id:"control-the-backend-program",level:2},{value:"Write code",id:"backend-code",level:3},{value:"Validate result",id:"validate-result",level:3},{value:"Control the front-end program",id:"control-the-front-end-program",level:2},{value:"Write code",id:"frontend-code",level:3},{value:"Validate result",id:"validate-result-1",level:3}],c={toc:d};function m(e){let{components:t,...i}=e;return(0,n.kt)("wrapper",(0,r.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"use-toggle-to-roll-out-a-feature"},"Use Toggle to Roll out a Feature"),(0,n.kt)("p",null,"We will guide you to use the FeatureProbe platform to control a back-end or front-end program, and let the back-end or front-end program display new features by percentage of received user requests."),(0,n.kt)("h2",{id:"create-a-toggle-on-the-platform"},"Create a toggle on the platform"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Log in to the FeatureProbe ",(0,n.kt)("a",{parentName:"li",href:"https://featureprobe.io"},"demo platform"),". If you log in for the first time, please enter your email address. You can continue to use your email to access your data in the future."),(0,n.kt)("li",{parentName:"ol"},"Click ",(0,n.kt)("inlineCode",{parentName:"li"},"+Toggle")," to create a new toggle.\n",(0,n.kt)("img",{alt:"add",src:a(9381).Z,width:"3004",height:"706"})),(0,n.kt)("li",{parentName:"ol"},"Set the name and key to ",(0,n.kt)("inlineCode",{parentName:"li"},"tutorial_rollout"),", click ",(0,n.kt)("inlineCode",{parentName:"li"},"Create and publish"),".\n",(0,n.kt)("img",{alt:"create",src:a(2452).Z,width:"1732",height:"1702"})),(0,n.kt)("li",{parentName:"ol"},"Click ",(0,n.kt)("inlineCode",{parentName:"li"},"tutorial_rollout")," from the toggle list to open the targeting details page.\n",(0,n.kt)("img",{alt:"list",src:a(8665).Z,width:"2996",height:"884"})),(0,n.kt)("li",{parentName:"ol"},"Change the return variation of the default rule to ",(0,n.kt)("inlineCode",{parentName:"li"},"a percentage rollout"),".\n",(0,n.kt)("img",{alt:"return",src:a(401).Z,width:"1898",height:"1814"})),(0,n.kt)("li",{parentName:"ol"},"Set 10% to open the toggle (return true), 90% to close the toggle (return false), and set the status to ",(0,n.kt)("inlineCode",{parentName:"li"},"enabled"),".\n",(0,n.kt)("img",{alt:"10% true",src:a(5762).Z,width:"1770",height:"1534"})),(0,n.kt)("li",{parentName:"ol"},"Click the ",(0,n.kt)("inlineCode",{parentName:"li"},"Publish")," button below and ",(0,n.kt)("inlineCode",{parentName:"li"},"Confirm")," the changes.\n",(0,n.kt)("img",{alt:"confirm",src:a(2908).Z,width:"1632",height:"974"}))),(0,n.kt)("p",null,"Till now, the operation on the platform is complete. We have created a toggle to manage gradual rollout. Next, we will use it in the program to see the actual effect."),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"After the toggle is created, it can be accessed in the back-end program or in the front-end program. Below we will introduce how to use it in ",(0,n.kt)("strong",{parentName:"p"},"Back-end code")," and ",(0,n.kt)("a",{parentName:"p",href:"#control-the-front-end-program"},(0,n.kt)("strong",{parentName:"a"},"Front-end code"))," this toggle, the two are independent of each other, you can choose to read the part you are interested in according to your needs.")),(0,n.kt)("h2",{id:"control-the-backend-program"},"Control the backend program"),(0,n.kt)("p",null,"We provide a backend code example, from which you can start to experience how the backend code uses the toggle."),(0,n.kt)("h3",{id:"backend-code"},"Write code"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"According to the language you are familiar with, download and open the corresponding back-end sample code.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/FeatureProbe/server-sdk-java.git\ncd server-sdk-java\n")),(0,n.kt)("p",null,"Open ",(0,n.kt)("inlineCode",{parentName:"p"},"src/main/java/com/featureprobe/sdk/example/FeatureProbeDemo.java")," file with an editor."),(0,n.kt)(l.Z,{groupId:"language",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"java",label:"Java",default:!0,mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/FeatureProbe/server-sdk-java.git\ncd server-sdk-java\n")),(0,n.kt)("p",null,"Open ",(0,n.kt)("inlineCode",{parentName:"p"},"src/main/java/com/featureprobe/sdk/example/FeatureProbeDemo.java")," file with an editor.")),(0,n.kt)(o.Z,{value:"golang",label:"Go",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/FeatureProbe/server-sdk-go.git\ncd server-sdk-go\n")),(0,n.kt)("p",null,"Open the ",(0,n.kt)("inlineCode",{parentName:"p"},"example/main.go")," file with an editor.")),(0,n.kt)(o.Z,{value:"rust",label:"Rust",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/FeatureProbe/server-sdk-rust.git\ncd server-sdk-rust\n")),(0,n.kt)("p",null,"Open the ",(0,n.kt)("inlineCode",{parentName:"p"},"examples/demo.rs")," file with an editor.")),(0,n.kt)(o.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/FeatureProbe/server-sdk-python.git\ncd server-sdk-python\n")),(0,n.kt)("p",null,"Open the ",(0,n.kt)("inlineCode",{parentName:"p"},"demo.py")," file with an editor.")),(0,n.kt)(o.Z,{value:"nodejs",label:"Node.js",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/FeatureProbe/server-sdk-node.git\ncd server-sdk-node\n")),(0,n.kt)("p",null,"Open the ",(0,n.kt)("inlineCode",{parentName:"p"},"examples/demo.js")," file with an editor."))),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Open the FeatureProbe platform ",(0,n.kt)("a",{parentName:"p",href:"https://featureprobe.io/projects"},"project list page"),", you can click ",(0,n.kt)("inlineCode",{parentName:"p"},"Projects")," on the toggle details page to open\n",(0,n.kt)("img",{alt:"project",src:a(77).Z,width:"3008",height:"974"}))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Copy ",(0,n.kt)("inlineCode",{parentName:"p"},"Server SDK Key"),"\n",(0,n.kt)("img",{alt:"sdk key",src:a(5775).Z,width:"2114",height:"1268"}))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Fill in ",(0,n.kt)("inlineCode",{parentName:"p"},"Server SDK Key")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"FeatureProbe remote URL"),' ("',(0,n.kt)("a",{parentName:"p",href:"https://featureprobe.io/server%22"},'https://featureprobe.io/server"'),") into the corresponding variables of the backend code"))),(0,n.kt)(l.Z,{groupId:"language",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"java",label:"Java",default:!0,mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="src/main/java/com/featureprobe/sdk/example/FeatureProbeDemo.java"',title:'"src/main/java/com/featureprobe/sdk/example/FeatureProbeDemo.java"'},'    private static final String FEATURE_PROBE_SERVER_URL = "https://featureprobe.io/server";\n    private static final String FEATURE_PROBE_SERVER_SDK_KEY = // Fill in the server SDK key\n'))),(0,n.kt)(o.Z,{value:"golang",label:"Go",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="example/main.go"',title:'"example/main.go"'},'config := featureprobe.FPConfig{\n    // highlight-start\n  RemoteUrl: "https://featureprobe.io/server",\n  ServerSdkKey:    // Fill in the server SDK key\n  // highlight-end\n  RefreshInterval: 5000, // ms\n  WaitFirstResp:   true,\n}\n'))),(0,n.kt)(o.Z,{value:"rust",label:"Rust",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-rust",metastring:'title="examples/demo.rs"',title:'"examples/demo.rs"'},'let remote_url = "https://featureprobe.io/server";\nlet server_sdk_key = // Fill in the server SDK key\n'))),(0,n.kt)(o.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="demo.py"',title:'"demo.py"'},"FEATURE_PROBE_SERVER_URL = 'https://featureprobe.io/server'\nFEATURE_PROBE_SERVER_SDK_KEY = # Fill in the server SDK key\n"))),(0,n.kt)(o.Z,{value:"nodejs",label:"Node.js",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="demo.js"',title:'"demo.js"'},"const FEATURE_PROBE_SERVER_URL = 'https://featureprobe.io/server';\nconst FEATURE_PROBE_SERVER_SDK_KEY = // Fill in the server SDK key\n")))),(0,n.kt)("ol",{start:5},(0,n.kt)("li",{parentName:"ol"},"Add the following code to simulate 100 users accessing this toggle.")),(0,n.kt)(l.Z,{groupId:"language",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"java",label:"Java",default:!0,mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="src/main/java/com/featureprobe/sdk/example/FeatureProbeDemo.java"',title:'"src/main/java/com/featureprobe/sdk/example/FeatureProbeDemo.java"'},'    public static void main(String[] args) throws IOException {\n\n        Logger root = (Logger)LoggerFactory.getLogger(org.slf4j.Logger.ROOT_LOGGER_NAME);\n        root.setLevel(Level.WARN);\n\n        final FPConfig config = FPConfig.builder()\n            .remoteUri(FEATURE_PROBE_SERVER_URL)\n            .build();\n\n        // Init FeatureProbe, share this FeatureProbe instance in your project.\n        final FeatureProbe fpClient = new FeatureProbe(FEATURE_PROBE_SERVER_SDK_KEY, config);\n\n        //\n        final String YOUR_TOGGLE_KEY = "tutorial_rollout";\n        // highlight-start\n        for (Integer i = 0; i < 100; i++) {\n            FPUser user = new FPUser();\n            Boolean isOpen = fpClient.boolValue(YOUR_TOGGLE_KEY, user, false);\n            System.out.println("feature for user " + i + " is :" + isOpen);\n        }\n        // highlight-end\n        fpClient.close();\n    }\n'))),(0,n.kt)(o.Z,{value:"golang",label:"Go",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="example/main.go"',title:'"example/main.go"'},'func main() {\n    config := featureprobe.FPConfig{\n        RemoteUrl: "https://featureprobe.io/server",\n        ServerSdkKey:    // Fill in the server SDK key\n        RefreshInterval: 5000, // ms\n        WaitFirstResp:   true,\n    }\n    fp, err := featureprobe.NewFeatureProbe(config)\n    if err != nil {\n        fmt.Println(err)\n        return\n    }\n    // highlight-start\n    for i:=0; i<100; i++  {\n        user := featureprobe.NewUser()\n        detail := fp.BoolValue("tutorial_rollout", user, false)\n        fmt.Println("feature for user", i, "is:", detail)\n    }\n    // highlight-end\n    fp.Close()\n}\n'))),(0,n.kt)(o.Z,{value:"rust",label:"Rust",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-rust",metastring:'title="examples/demo.rs"',title:'"examples/demo.rs"'},'#[tokio::main]\nasync fn main() {\n    let remote_url = "https://featureprobe.io/server";\n    let server_sdk_key = // Fill in the server SDK key\n    let config = FPConfig {\n        remote_url: remote_url.to_owned(),\n        server_sdk_key: server_sdk_key.to_owned(),\n        refresh_interval: Duration::from_millis(2000),\n        ..Default::default()\n    };\n\n    let fp = match FeatureProbe::new(config) {\n        Ok(fp) => fp,\n        Err(e) => {\n            tracing::error!("{:?}", e);\n            return;\n        }\n    };\n  // highlight-start\n    for n in 1..100 {\n        let user = FPUser::new();\n        let enable = fp.bool_value("tutorial_rollout", &user, false);\n        println!("feature for user {:?} is: {:?}", n, enable);\n    }\n  // highlight-end\n    fp.close();\n}\n'))),(0,n.kt)(o.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="demo.py"',title:'"demo.py"'},"logging.basicConfig(level=logging.WARNING)\n\nif __name__ == '__main__':\n    FEATURE_PROBE_SERVER_URL = 'https://featureprobe.io/server'\n    FEATURE_PROBE_SERVER_SDK_KEY = # Fill in the server SDK key\n\n    config = fp.Config(remote_uri=FEATURE_PROBE_SERVER_URL,  # FeatureProbe server URL\n                       sync_mode='polling',\n                       refresh_interval=3)\n\n    with fp.Client(FEATURE_PROBE_SERVER_SDK_KEY, config) as client:\n      # highlight-start\n        for i in range(100):\n            user = fp.User()\n            is_open = client.value('tutorial_rollout', user, default=False)\n            print('feature for user ' + str(i) + ' is: ' + str(is_open))\n      # highlight-end\n"))),(0,n.kt)(o.Z,{value:"nodejs",label:"Node.js",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="demo.js"',title:'"demo.js"'},'const fpClient = new featureProbe.FeatureProbe({\n  remoteUrl: FEATURE_PROBE_SERVER_URL,\n  serverSdkKey: FEATURE_PROBE_SERVER_SDK_KEY,\n  refreshInterval: 5000,\n});\n\n// highlight-start\nfor(let i = 0; i < 100; i++) {\n  const user = new featureProbe.FPUser();\n  const isOpen = fpClient.booleanValue(YOUR_TOGGLE_KEY, user, false);\n  console.log("feature for user " + i + " is :" + isOpen);\n}\n// highlight-end\n\n')))),(0,n.kt)("ol",{start:6},(0,n.kt)("li",{parentName:"ol"},"Run the program.")),(0,n.kt)(l.Z,{groupId:"language",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"java",label:"Java",default:!0,mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"mvn package\njava -jar ./target/server-sdk-java-1.4.0.jar\n"))),(0,n.kt)(o.Z,{value:"golang",label:"Go",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"go run example/main.go\n"))),(0,n.kt)(o.Z,{value:"rust",label:"Rust",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"cargo run --example demo\n"))),(0,n.kt)(o.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"pip3 install -r requirements.txt\npython3 demo.py\n"))),(0,n.kt)(o.Z,{value:"nodejs",label:"Node.js",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"node demo.js\n")))),(0,n.kt)("h3",{id:"validate-result"},"Validate result"),(0,n.kt)("p",null,"From the command line log, we can see that about 10% of the users entered the toggle, that is, they got the return variation value true."),(0,n.kt)("details",null,(0,n.kt)("summary",null,"log example"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"feature for user 0 is :false\n# highlight-next-line\nfeature for user 1 is :true\nfeature for user 2 is :false\nfeature for user 3 is :false\nfeature for user 4 is :false\nfeature for user 5 is :false\nfeature for user 6 is :false\nfeature for user 7 is :false\nfeature for user 8 is :false\nfeature for user 9 is :false\nfeature for user 10 is :false\n# highlight-next-line\nfeature for user 11 is :true\nfeature for user 12 is :false\nfeature for user 13 is :false\nfeature for user 14 is :false\nfeature for user 15 is :false\nfeature for user 16 is :false\nfeature for user 17 is :false\nfeature for user 18 is :false\nfeature for user 19 is :false\nfeature for user 20 is :false\n"))),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"Every time the program is run, the user who enters the toggle may be different. If users with the same id always get the same toggle result, you need to ",(0,n.kt)("a",{parentName:"p",href:"/FeatureProbe/tutorials/rollout_tutorial/stable_rollout_tutorial"},"use FPUser's stableRollout interface"),".")),(0,n.kt)("p",null,"You can go back to the toggle targeting page of the platform, adjust the percentage, and then re-run the server program to see if the ratio of entering the toggle in the log has changed."),(0,n.kt)("h2",{id:"control-the-front-end-program"},"Control the front-end program"),(0,n.kt)("p",null,"We provide a front-end js code example, and you can start to experience how the front-end code uses toggles."),(0,n.kt)("h3",{id:"frontend-code"},"Write code"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Clone the code.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/FeatureProbe/client-sdk-js.git\ncd client-sdk-js\n")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Open ",(0,n.kt)("a",{parentName:"li",href:"https://featureprobe.io/projects"},"platform")," to get client sdk key.")),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},'Click the "Projects" tab to enter the "Projects" list, obtain various SDK keys, and modify service and environment information.')),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"client sdk key",src:a(9646).Z,width:"2144",height:"1266"})),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},"Open ",(0,n.kt)("inlineCode",{parentName:"li"},"example/index.html")," and fill in ",(0,n.kt)("inlineCode",{parentName:"li"},"Client SDK Key")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"FeatureProbe URL"),' ("',(0,n.kt)("a",{parentName:"li",href:"https://featureprobe.io/server%22"},'https://featureprobe.io/server"'),")")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="example/index.html"',title:'"example/index.html"'},'const fpClient = new featureProbe.FeatureProbe({\n  // highlight-start\n  remoteUrl: "https://featureprobe.io/server",\n  clientSdkKey: // Paste client sdk key here,\n  // highlight-end\n  user,\n  refreshInterval: 5000,\n});\n')),(0,n.kt)("ol",{start:4},(0,n.kt)("li",{parentName:"ol"},"Simulate the current user accessing the toggle ",(0,n.kt)("inlineCode",{parentName:"li"},"tutorial_rollout")," and get the toggle status directly")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="example/index.html"',title:'"example/index.html"'},'<script>\n  // highlight-next-line\n  const user = new featureProbe.FPUser();\n  const fpClient = new featureProbe.FeatureProbe({\n    remoteUrl: "https://featureprobe.io/server",\n    clientSdkKey: // Paste client sdk key here,\n    user,\n    refreshInterval: 5000,\n  });\n  \n  fpClient.start();\n  fpClient.on("ready", function() {\n    // highlight-start\n    const boolValue = fpClient. boolValue("tutorial_rollout", false);\n    document.getElementById("boolean-result").innerText = boolValue;\n    // highlight-end\n  });\n<\/script>\n')),(0,n.kt)("h3",{id:"validate-result-1"},"Validate result"),(0,n.kt)("p",null,"Open ",(0,n.kt)("inlineCode",{parentName:"p"},"index.html")," in the browser, manually refresh the page (simulating multiple visits by the user), and you can see that the page can get the return value of ",(0,n.kt)("inlineCode",{parentName:"p"},"true")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"false")," according to the configured percentage."),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Demo"),(0,n.kt)(l.Z,{mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"true",label:"True",default:!0,mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"FeatureProbe JS SDK demo\nThis is a simple front-end-only application using FeatureProbe JS SDK.\n\nboolean type\nFeatureProbe evaluation boolean type toggle result is : true\n"))),(0,n.kt)(o.Z,{value:"false",label:"False",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"FeatureProbe JS SDK demo\nThis is a simple front-end-only application using FeatureProbe JS SDK.\n\nboolean type\nFeatureProbe evaluation boolean type toggle result is : false\n"))))),(0,n.kt)("p",null,"You can go back to the toggle targeting page of the platform, adjust the percentage, and then refresh the page to see if the obtained ",(0,n.kt)("inlineCode",{parentName:"p"},"true"),"/",(0,n.kt)("inlineCode",{parentName:"p"},"false")," has changed."),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"If you want the same user, no matter how he refreshes, he will always get a stable value. You need to ",(0,n.kt)("a",{parentName:"p",href:"/FeatureProbe/tutorials/rollout_tutorial/stable_rollout_tutorial"},"Stable Rollout"),", and pass in the user's unique ID.")))}m.isMDXComponent=!0},77:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/tutorial_click_project_en-31e382beb680826367336c8abef12e8c.png"},9646:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/tutorial_client_sdk_key_en-1d0063e09cdc2c33baa2049dc69c0124.png"},9381:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/tutorial_create_toggle_button_en-c1be44036b363082cce70f9f216cbea5.png"},8665:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/tutorial_list_click_en-15e642a72436043291d81ba37120523a.png"},401:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/tutorial_return_percentage_en-880b69566093e2b0d4af9e343c8eca61.png"},2908:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/tutorial_rollout_confirm_en-6656ef11401f32beb9281c659748aa3e.png"},2452:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/tutorial_rollout_create_en-b92428f68431c233083770f3001bad78.png"},5762:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/tutorial_rollout_enable_en-bde2c604ecbb43fa5b998d26d7e3718d.png"},5775:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/tutorial_rollout_server_sdk_key_en-7101df1cd765f46fd60257d00552c4ad.png"}}]);