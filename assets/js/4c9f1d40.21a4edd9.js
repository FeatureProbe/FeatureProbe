"use strict";(self.webpackChunkfeature_probe_docs=self.webpackChunkfeature_probe_docs||[]).push([[3160],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>d});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},l=Object.keys(e);for(a=0;a<l.length;a++)r=l[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)r=l[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=a.createContext({}),u=function(e){var t=a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,l=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=u(r),d=n,h=m["".concat(s,".").concat(d)]||m[d]||c[d]||l;return r?a.createElement(h,i(i({ref:t},p),{},{components:r})):a.createElement(h,i({ref:t},p))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=r.length,i=new Array(l);i[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:n,i[1]=o;for(var u=2;u<l;u++)i[u]=r[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},5162:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(7294),n=r(6010);const l="tabItem_Ymn6";function i(e){let{children:t,hidden:r,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,n.Z)(l,i),hidden:r},t)}},4866:(e,t,r)=>{r.d(t,{Z:()=>_});var a=r(7462),n=r(7294),l=r(6010),i=r(2466),o=r(6550),s=r(1980),u=r(7392),p=r(12);function c(e){return function(e){return n.Children.map(e,(e=>{if((0,n.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))}(e).map((e=>{let{props:{value:t,label:r,attributes:a,default:n}}=e;return{value:t,label:r,attributes:a,default:n}}))}function m(e){const{values:t,children:r}=e;return(0,n.useMemo)((()=>{const e=t??c(r);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,r])}function d(e){let{value:t,tabValues:r}=e;return r.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:r}=e;const a=(0,o.k6)(),l=function(e){let{queryString:t=!1,groupId:r}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:t,groupId:r});return[(0,s._X)(l),(0,n.useCallback)((e=>{if(!l)return;const t=new URLSearchParams(a.location.search);t.set(l,e),a.replace({...a.location,search:t.toString()})}),[l,a])]}function g(e){const{defaultValue:t,queryString:r=!1,groupId:a}=e,l=m(e),[i,o]=(0,n.useState)((()=>function(e){let{defaultValue:t,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=r.find((e=>e.default))??r[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:l}))),[s,u]=h({queryString:r,groupId:a}),[c,g]=function(e){let{groupId:t}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,l]=(0,p.Nk)(r);return[a,(0,n.useCallback)((e=>{r&&l.set(e)}),[r,l])]}({groupId:a}),k=(()=>{const e=s??c;return d({value:e,tabValues:l})?e:null})();(0,n.useLayoutEffect)((()=>{k&&o(k)}),[k]);return{selectedValue:i,selectValue:(0,n.useCallback)((e=>{if(!d({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),g(e)}),[u,g,l]),tabValues:l}}var k=r(2389);const f="tabList__CuJ",b="tabItem_LNqP";function v(e){let{className:t,block:r,selectedValue:o,selectValue:s,tabValues:u}=e;const p=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.o5)(),m=e=>{const t=e.currentTarget,r=p.indexOf(t),a=u[r].value;a!==o&&(c(t),s(a))},d=e=>{let t=null;switch(e.key){case"Enter":m(e);break;case"ArrowRight":{const r=p.indexOf(e.currentTarget)+1;t=p[r]??p[0];break}case"ArrowLeft":{const r=p.indexOf(e.currentTarget)-1;t=p[r]??p[p.length-1];break}}t?.focus()};return n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":r},t)},u.map((e=>{let{value:t,label:r,attributes:i}=e;return n.createElement("li",(0,a.Z)({role:"tab",tabIndex:o===t?0:-1,"aria-selected":o===t,key:t,ref:e=>p.push(e),onKeyDown:d,onClick:m},i,{className:(0,l.Z)("tabs__item",b,i?.className,{"tabs__item--active":o===t})}),r??t)})))}function y(e){let{lazy:t,children:r,selectedValue:a}=e;if(r=Array.isArray(r)?r:[r],t){const e=r.find((e=>e.props.value===a));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return n.createElement("div",{className:"margin-top--md"},r.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function w(e){const t=g(e);return n.createElement("div",{className:(0,l.Z)("tabs-container",f)},n.createElement(v,(0,a.Z)({},e,t)),n.createElement(y,(0,a.Z)({},e,t)))}function _(e){const t=(0,k.Z)();return n.createElement(w,(0,a.Z)({key:String(t)},e))}},2793:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>u,toc:()=>c});var a=r(7462),n=(r(7294),r(3905)),l=r(4866),i=r(5162);const o={sidebar_position:4},s="Show different information to different users",u={unversionedId:"tutorials/backend_custom_attribute",id:"tutorials/backend_custom_attribute",title:"Show different information to different users",description:"We'll guide you to use FeatureProbe platform to create a custom feature-controlled toggle. Then we write a back-end program to verify that the back-end program requests the FeatureProbe SDK with different user information, and will get different results.",source:"@site/docs/tutorials/backend_custom_attribute.md",sourceDirName:"tutorials",slug:"/tutorials/backend_custom_attribute",permalink:"/FeatureProbe/tutorials/backend_custom_attribute",draft:!1,editUrl:"https://github.com/FeatureProbe/FeatureProbe/blob/main/docs/docs/tutorials/backend_custom_attribute.md",tags:[],version:"current",lastUpdatedAt:1706624576,formattedLastUpdatedAt:"Jan 30, 2024",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"defaultSidebar",previous:{title:"Stable rollout",permalink:"/FeatureProbe/tutorials/rollout_tutorial/stable_rollout_tutorial"},next:{title:"Use segment",permalink:"/FeatureProbe/tutorials/user_segment_tutorial"}},p={},c=[{value:"Control the back-end program",id:"control-the-back-end-program",level:2},{value:"Write code",id:"write-code",level:3},{value:"Validate result",id:"validate-result",level:3},{value:"Control the front-end program",id:"control-the-front-end-program",level:2},{value:"Write code",id:"write-code-1",level:3},{value:"Validate result",id:"validate-result-1",level:3}],m={toc:c};function d(e){let{components:t,...o}=e;return(0,n.kt)("wrapper",(0,a.Z)({},m,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"show-different-information-to-different-users"},"Show different information to different users"),(0,n.kt)("p",null,"We'll guide you to use FeatureProbe platform to create a custom feature-controlled toggle. Then we write a back-end program to verify that the back-end program requests the FeatureProbe SDK with different user information, and will get different results."),(0,n.kt)("p",null,"Suppose we want to implement the following scenario:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'For "VIP" users of "Shanghai", it will display "Welcome VIP customers from Shanghai"'),(0,n.kt)("li",{parentName:"ul"},'For "Beijing" users (without distinguishing levels), display "Welcome customers from Beijing"'),(0,n.kt)("li",{parentName:"ul"},'For users who do not meet the above two conditions, display "Welcome"')),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Log in to the FeatureProbe ",(0,n.kt)("a",{parentName:"li",href:"https://featureprobe.io"},"demo platform"),". If you log in for the first time, please enter your email address. You can continue to use your email to access your data in the future."),(0,n.kt)("li",{parentName:"ol"},"Click ",(0,n.kt)("inlineCode",{parentName:"li"},"+Toggle")," to create a new toggle.")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Fill in the name and key."),(0,n.kt)("li",{parentName:"ul"},"Select the string type as the return variation type."),(0,n.kt)("li",{parentName:"ul"},"Add three variations, fill in the name and value respectively, the value is the three different prompts we want to return."),(0,n.kt)("li",{parentName:"ul"},"Select a variation when toggle is disabled."),(0,n.kt)("li",{parentName:"ul"},"Click ",(0,n.kt)("inlineCode",{parentName:"li"},"Create and publish"),".")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"create toggle",src:r(345).Z,width:"1668",height:"1880"})),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},"Click to enter the targeting page of the newly created tutorial_variation toggle")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Click + Add rule to add a new rule"),(0,n.kt)("li",{parentName:"ul"},"Add two conditions to the rules, the city is shanghai, and the rank is VIP"),(0,n.kt)("li",{parentName:"ul"},"The return value is selected as variation1 (that is, the value is: welcome VIP customers from Shanghai)")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"rule one",src:r(2309).Z,width:"1902",height:"1644"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Click ",(0,n.kt)("inlineCode",{parentName:"li"},"+ Add Rule")," again"),(0,n.kt)("li",{parentName:"ul"},"Add a condition to the rule, the city is Beijing, and the return variation is selected as variation2")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"rule two",src:r(8712).Z,width:"1760",height:"1916"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"The return variation when no rules is matched is selected as variation3")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"default",src:r(5900).Z,width:"1652",height:"1904"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Change the toggle status to ",(0,n.kt)("inlineCode",{parentName:"li"},"enabled"),", click ",(0,n.kt)("inlineCode",{parentName:"li"},"publish")," below")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"publish",src:r(4163).Z,width:"1750",height:"1914"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Click ",(0,n.kt)("inlineCode",{parentName:"li"},"Confirm")," to release the toggle.")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"confirm",src:r(6119).Z,width:"1646",height:"1436"})),(0,n.kt)("ol",{start:4},(0,n.kt)("li",{parentName:"ol"},"At this point, you should see the prompt of ",(0,n.kt)("inlineCode",{parentName:"li"},"Published successfully"))),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"publish success",src:r(2381).Z,width:"2558",height:"402"})),(0,n.kt)("p",null,"The operation on the platform is over here, the toggle has been successfully created and can be accessed. Below we introduce how to get these variation values by SDK."),(0,n.kt)("h2",{id:"control-the-back-end-program"},"Control the back-end program"),(0,n.kt)("p",null,"We provide a backend code example, from which you can start to experience how the backend code uses the toggle."),(0,n.kt)("h3",{id:"write-code"},"Write code"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"According to the language you are familiar with, download and open the corresponding back-end sample code.")),(0,n.kt)(l.Z,{groupId:"language",mdxType:"Tabs"},(0,n.kt)(i.Z,{value:"java",label:"Java",default:!0,mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/FeatureProbe/server-sdk-java.git\ncd server-sdk-java\n")),(0,n.kt)("p",null,"Open ",(0,n.kt)("inlineCode",{parentName:"p"},"src/main/java/com/featureprobe/sdk/example/FeatureProbeDemo.java")," file with an editor.")),(0,n.kt)(i.Z,{value:"golang",label:"Go",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/FeatureProbe/server-sdk-go.git\ncd server-sdk-go\n")),(0,n.kt)("p",null,"Open the ",(0,n.kt)("inlineCode",{parentName:"p"},"example/main.go")," file with an editor.")),(0,n.kt)(i.Z,{value:"rust",label:"Rust",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/FeatureProbe/server-sdk-rust.git\ncd server-sdk-rust\n")),(0,n.kt)("p",null,"Open the ",(0,n.kt)("inlineCode",{parentName:"p"},"examples/demo.rs")," file with an editor.")),(0,n.kt)(i.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/FeatureProbe/server-sdk-python.git\ncd server-sdk-python\n")),(0,n.kt)("p",null,"Open the ",(0,n.kt)("inlineCode",{parentName:"p"},"demo.py")," file with an editor.")),(0,n.kt)(i.Z,{value:"nodejs",label:"Node.js",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/FeatureProbe/server-sdk-node.git\ncd server-sdk-node\n")),(0,n.kt)("p",null,"Open the ",(0,n.kt)("inlineCode",{parentName:"p"},"example/demo.js")," file with an editor."))),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Open the FeatureProbe platform ",(0,n.kt)("a",{parentName:"p",href:"https://featureprobe.io/projects"},"projects page"),", you can click ",(0,n.kt)("inlineCode",{parentName:"p"},"Projects")," on the toggle targeting page to open: ",(0,n.kt)("img",{alt:"project",src:r(77).Z,width:"3008",height:"974"}))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Copy ",(0,n.kt)("inlineCode",{parentName:"p"},"Server SDK Key")," ",(0,n.kt)("img",{alt:"sdk key",src:r(5775).Z,width:"2114",height:"1268"}))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Fill in ",(0,n.kt)("inlineCode",{parentName:"p"},"Server SDK Key")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"FeatureProbe remote URL"),' ("',(0,n.kt)("a",{parentName:"p",href:"https://featureprobe.io/server%22"},'https://featureprobe.io/server"'),") into the corresponding variables of the backend code"))),(0,n.kt)(l.Z,{groupId:"language",mdxType:"Tabs"},(0,n.kt)(i.Z,{value:"java",label:"Java",default:!0,mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="src/main/java/com/featureprobe/sdk/example/FeatureProbeDemo.java"',title:'"src/main/java/com/featureprobe/sdk/example/FeatureProbeDemo.java"'},'    private static final String FEATURE_PROBE_SERVER_URL = "https://featureprobe.io/server";\n    private static final String FEATURE_PROBE_SERVER_SDK_KEY = // Fill in the server SDK key\n'))),(0,n.kt)(i.Z,{value:"golang",label:"Go",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="example/main.go"',title:'"example/main.go"'},'    config := featureprobe.FPConfig{\n        // highlight-start\n        RemoteUrl: "https://featureprobe.io/server",\n        ServerSdkKey:    // Fill in the server SDK key\n        // highlight-end\n        RefreshInterval: 5000, // ms\n        WaitFirstResp:   true,\n    }\n'))),(0,n.kt)(i.Z,{value:"rust",label:"Rust",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-rust",metastring:'title="examples/demo.rs"',title:'"examples/demo.rs"'},'    let remote_url = "https://featureprobe.io/server";\n    let server_sdk_key = // Fill in the server SDK key\n'))),(0,n.kt)(i.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="demo.py"',title:'"demo.py"'},"    FEATURE_PROBE_SERVER_URL = 'https://featureprobe.io/server'\n    FEATURE_PROBE_SERVER_SDK_KEY = # Fill in the server SDK key\n"))),(0,n.kt)(i.Z,{value:"nodejs",label:"Node.js",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="demo.js"',title:'"demo.js"'},"const FEATURE_PROBE_SERVER_URL = 'https://featureprobe.io/server';\nconst FEATURE_PROBE_SERVER_SDK_KEY = // Fill in the server SDK key\n")))),(0,n.kt)("ol",{start:5},(0,n.kt)("li",{parentName:"ol"},"Add the following code to simulate five users accessing this toggle",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"VIP users from Shanghai"),(0,n.kt)("li",{parentName:"ol"},"Gold users form Shanghai"),(0,n.kt)("li",{parentName:"ol"},"VIP users form Beijing"),(0,n.kt)("li",{parentName:"ol"},"Gold users form Beijing"),(0,n.kt)("li",{parentName:"ol"},"VIP users form Tianjin")))),(0,n.kt)(l.Z,{groupId:"language",mdxType:"Tabs"},(0,n.kt)(i.Z,{value:"java",label:"Java",default:!0,mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="src/main/java/com/featureprobe/sdk/example/FeatureProbeDemo.java"',title:'"src/main/java/com/featureprobe/sdk/example/FeatureProbeDemo.java"'},'    public static void main(String[] args) throws IOException {\n\n        Logger root = (Logger)LoggerFactory.getLogger(org.slf4j.Logger.ROOT_LOGGER_NAME);\n        root.setLevel(Level.WARN);\n\n        final FPConfig config = FPConfig.builder()\n            .remoteUri(FEATURE_PROBE_SERVER_URL)\n            .build();\n\n        // Init FeatureProbe, share this FeatureProbe instance in your project.\n        final FeatureProbe fpClient = new FeatureProbe(FEATURE_PROBE_SERVER_SDK_KEY, config);\n        \n        // highlight-start\n        FPUser[] users = {\n            new FPUser().with("city", "Shanghai").with("rank", "VIP"),\n            new FPUser().with("city", "Shanghai").with("rank", "Gold"),\n            new FPUser().with("city", "Beijing").with("rank", "VIP"),\n            new FPUser().with("city", "Beijing").with("rank", "Gold"),\n            new FPUser().with("city", "Tianjin").with("rank", "VIP"),\n        };\n    \n        for (FPUser user:users) {\n            String greeting = fpClient.stringValue("tutorial_variation", user, "Welcome");\n            System.out.println(greeting);\n        }\n        // highlight-end\n                  \n        fpClient.close();\n    }\n'))),(0,n.kt)(i.Z,{value:"golang",label:"Go",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="example/main.go"',title:'"example/main.go"'},'func main() {\n    config := featureprobe.FPConfig{\n        RemoteUrl: "https://featureprobe.io/server",\n        ServerSdkKey:    // Fill in the server SDK key\n        RefreshInterval: 5000, // ms\n        WaitFirstResp:   true,\n    }\n    fp, err := featureprobe.NewFeatureProbe(config)\n    if err != nil {\n        fmt.Println(err)\n        return\n    }\n    // highlight-start\n    users := []featureprobe.FPUser{\n        featureprobe.NewUser().With("city", "Shanghai").With("rank", "VIP"),\n        featureprobe.NewUser().With("city", "Shanghai").With("rank", "Gold"),\n        featureprobe.NewUser().With("city", "Beijing").With("rank", "VIP"),\n        featureprobe.NewUser().With("city", "Beijing").With("rank", "Gold"),\n        featureprobe.NewUser().With("city", "Tianjin").With("rank", "VIP"),\n    }\n\n    for _, user := range users {\n        greeting := fp.StrValue("tutorial_variation", user, "Welcome")\n        fmt.Println(greeting)\n    }\n    // highlight-end\n    fp.Close()\n}\n'))),(0,n.kt)(i.Z,{value:"rust",label:"Rust",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-rust",metastring:'title="examples/demo.rs"',title:'"examples/demo.rs"'},'#[tokio::main]\nasync fn main() {\n    let remote_url = "https://featureprobe.io/server";\n    let server_sdk_key = // Fill in the server SDK key\n    let config = FPConfig {\n        remote_url: remote_url.to_owned(),\n        server_sdk_key: server_sdk_key.to_owned(),\n        refresh_interval: Duration::from_millis(2000),\n        ..Default::default()\n    };\n\n    let fp = match FeatureProbe::new(config) {\n        Ok(fp) => fp,\n        Err(e) => {\n            tracing::error!("{:?}", e);\n            return;\n        }\n    };\n  // highlight-start\n    let users = [\n        FPUser::new().with("city", "Shanghai").with("rank", "VIP"),\n        FPUser::new().with("city", "Shanghai").with("rank", "Gold"),\n        FPUser::new().with("city", "Beijing").with("rank", "VIP"),\n        FPUser::new().with("city", "Beijing").with("rank", "Gold"),\n        FPUser::new().with("city", "Tianjin").with("rank", "VIP")\n    ];\n    for user in users {\n        let greeting = fp.string_value("tutorial_variation", &user, "Welcome".to_string());\n        println!("{:?}", greeting);\n    }\n  // highlight-end\n    fp.close();\n}\n'))),(0,n.kt)(i.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="demo.py"',title:'"demo.py"'},'logging.basicConfig(level=logging.WARNING)\n\nif __name__ == \'__main__\':\n    FEATURE_PROBE_SERVER_URL = \'https://featureprobe.io/server\'\n    FEATURE_PROBE_SERVER_SDK_KEY = # Fill in the server SDK key\n\n    config = fp.Config(remote_uri=FEATURE_PROBE_SERVER_URL,  # FeatureProbe server URL\n                       sync_mode=\'polling\',\n                       refresh_interval=3)\n\n    with fp.Client(FEATURE_PROBE_SERVER_SDK_KEY, config) as client:\n      # highlight-start\n      users = [\n         fp.User().with_attr("city", "Shanghai").with_attr("rank", "VIP"),\n         fp.User().with_attr("city", "Shanghai").with_attr("rank", "Gold"),\n         fp.User().with_attr("city", "Beijing").with_attr("rank", "VIP"),\n         fp.User().with_attr("city", "Beijing").with_attr("rank", "Gold"),\n         fp.User().with_attr("city", "Tianjin").with_attr("rank", "VIP")\n      ]\n      for user in users:\n        greeting = client.value(\'tutorial_variation\', user, default="Welcome")\n        print(greeting)\n      # highlight-end\n'))),(0,n.kt)(i.Z,{value:"nodejs",label:"Node.js",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="demo.js"',title:'"demo.js"'},'const fpClient = new featureProbe.FeatureProbe({\n  remoteUrl: FEATURE_PROBE_SERVER_URL,\n  serverSdkKey: FEATURE_PROBE_SERVER_SDK_KEY,\n  refreshInterval: 5000,\n});\n\n// highlight-start\nconst users = [\n    new featureProbe.FPUser().with("city", "Shanghai").with("rank", "VIP"),\n    new featureProbe.FPUser().with("city", "Shanghai").with("rank", "Gold"),\n    new featureProbe.FPUser().with("city", "Beijing").with("rank", "VIP"),\n    new featureProbe.FPUser().with("city", "Beijing").with("rank", "Gold"),\n    new featureProbe.FPUser().with("city", "Tianjin").with("rank", "VIP"),\n];\n\nfor(let i = 0; i < users.length; i++) {\n  const greeting = fpClient.stringValue("tutorial_variation", users[i], "Welcome");\n  console.log(greeting);\n}\n// highlight-end\n\n')))),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"The user's attributes (for example: city, rank) need to be obtained by the developer in the business code in other ways, and then passed to the FeatureProbe SDK through the with method. The SDK is only responsible for applying rules to these users, The SDK cannot infer the user's attributes internally by itself.")),(0,n.kt)("ol",{start:6},(0,n.kt)("li",{parentName:"ol"},"Run the program")),(0,n.kt)(l.Z,{groupId:"language",mdxType:"Tabs"},(0,n.kt)(i.Z,{value:"java",label:"Java",default:!0,mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"mvn package\njava -jar ./target/server-sdk-java-1.4.0.jar\n"))),(0,n.kt)(i.Z,{value:"golang",label:"Go",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"go run example/main.go\n"))),(0,n.kt)(i.Z,{value:"rust",label:"Rust",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"cargo run --example demo\n"))),(0,n.kt)(i.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"pip3 install -r requirements.txt\npython3 demo.py\n"))),(0,n.kt)(i.Z,{value:"nodejs",label:"Node.js",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"node demo.js\n")))),(0,n.kt)("h3",{id:"validate-result"},"Validate result"),(0,n.kt)("p",null,"As can be seen from the command line log, for the following five test users:"),(0,n.kt)("blockquote",null,(0,n.kt)("ol",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ol"},"VIP users from Shanghai"),(0,n.kt)("li",{parentName:"ol"},"Gold users form Shanghai"),(0,n.kt)("li",{parentName:"ol"},"VIP users form Beijing"),(0,n.kt)("li",{parentName:"ol"},"Gold users form Beijing"),(0,n.kt)("li",{parentName:"ol"},"VIP users form Tianjin"))),(0,n.kt)("p",null,"apply rules"),(0,n.kt)("blockquote",null,(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},'For "VIP" users of "Shanghai", it will display "Welcome VIP customers from Shanghai"'),(0,n.kt)("li",{parentName:"ul"},'For "Beijing" users (without distinguishing levels), display "Welcome customers from Beijing"'),(0,n.kt)("li",{parentName:"ul"},'For users who do not meet the above two conditions, display "Welcome"'))),(0,n.kt)("p",null,"After that, the following results were obtained:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"Welcome VIP customers from Shanghai\nwelcome\nWelcome customers from Beijing\nWelcome customers from Beijing\nwelcome\n")),(0,n.kt)("p",null,"You can change the code, try more combinations of user attributes, and see if the results displayed in the log meet the conditions."),(0,n.kt)("h2",{id:"control-the-front-end-program"},"Control the front-end program"),(0,n.kt)("p",null,"We provide a front-end js code example, and you can start to experience how the front-end code uses toggles from here."),(0,n.kt)("h3",{id:"write-code-1"},"Write code"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Download the sample code")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/FeatureProbe/client-sdk-js.git\ncd client-sdk-js\n")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Open ",(0,n.kt)("a",{parentName:"li",href:"https://featureprobe.io/projects"},"platform")," to get client sdk key")),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},'Click the "Projects" tab to enter the "Projects" list, obtain various SDK keys, and modify project and environment information.')),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"client sdk key",src:r(6374).Z,width:"1548",height:"1218"})),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},"Open ",(0,n.kt)("inlineCode",{parentName:"li"},"example/index.html")," and fill in ",(0,n.kt)("inlineCode",{parentName:"li"},"Client SDK Key")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"FeatureProbe URL"),' ("',(0,n.kt)("a",{parentName:"li",href:"https://featureprobe.io/server%22"},'https://featureprobe.io/server"'),")")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="example/index.html"',title:'"example/index.html"'},'const fpClient = new featureProbe. FeatureProbe({\n    // highlight-start\n    remoteUrl: "https://featureprobe.io/server",\n    clientSdkKey: // Paste client sdk key here,\n    // highlight-end\n    user,\n    refreshInterval: 5000,\n});\n')),(0,n.kt)("ol",{start:4},(0,n.kt)("li",{parentName:"ol"},'Simulate the "VIP" user from "Shanghai" to access the toggle ',(0,n.kt)("inlineCode",{parentName:"li"},"tutorial_variation")," and get the toggle result directly")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="example/index.html"',title:'"example/index.html"'},'<script>\n    // highlight-next-line\n    const user = new featureProbe.FPUser().with("city", "Shanghai").with("rank", "VIP");\n\n    const fpClient = new featureProbe. FeatureProbe({\n        remoteUrl: "https://featureprobe.io/server",\n        clientSdkKey: // Paste client sdk key here,\n        user,\n        refreshInterval: 5000,\n    });\n\n    fpClient.start();\n    fpClient.on("ready", function() {\n        // highlight-start\n        const stringValue = fpClient.stringValue("tutorial_variation", "Welcome");\n        document.getElementById("string-result").innerText = stringValue;\n        // highlight-end\n    });\n<\/script>\n')),(0,n.kt)("h3",{id:"validate-result-1"},"Validate result"),(0,n.kt)("p",null,"Open ",(0,n.kt)("inlineCode",{parentName:"p"},"index.html"),' in the browser, and you can see that for the current "Welcome VIP customers from Shanghai".'),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"string type\nFeatureProbe evaluation string type toggle result is : Welcome VIP customers from Shanghai\n")),(0,n.kt)("p",null,"You can go back to the ",(0,n.kt)("inlineCode",{parentName:"p"},"index.html")," file and update the ",(0,n.kt)("inlineCode",{parentName:"p"},"with")," parameter to see the difference in the return variation value."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="example/index.html"',title:'"example/index.html"'},'const user = new featureProbe.FPUser().with("city", "Beijing").with("rank", "VIP");\n')))}d.isMDXComponent=!0},77:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/tutorial_click_project_en-31e382beb680826367336c8abef12e8c.png"},6374:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/tutorial_client_sdk_key_cn-fcf9cc73d6a62b4687b852f17df52fb0.png"},5775:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/tutorial_rollout_server_sdk_key_en-7101df1cd765f46fd60257d00552c4ad.png"},6119:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/tutorial_variation_confirm_en-f348d5cdb6433806677d79242b3c6db3.png"},345:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/tutorial_variation_create_en-0928357e28365c250202f3c981aeb1f9.png"},5900:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/tutorial_variation_default_rule_en-4a620d73d9d4acdd9212037916430f13.png"},4163:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/tutorial_variation_publish_en-d97f998b88cceb232910338e8d8250ca.png"},2381:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/tutorial_variation_publish_success_en-479e58c3ed5c9a19e5cf9ccbea04fa53.png"},2309:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/tutorial_variation_rule1_en-fac9c0d85846a443e133f0228b03d4b4.png"},8712:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/tutorial_variation_rule2_en-ff9b14eb596b13a771e26c5665d5259c.png"}}]);