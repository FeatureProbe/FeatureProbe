---
sidebar_position: 12
---

# 使用前置条件

前置开关允许您在FeatureProbe中控制功能开关之间的依赖关系。您可以使一个功能开关依赖于其他功能开关的启用状态才能生效。通过添加前置条件实现复杂实验人群的选择或实验层切分流量等

## 使用前置条件

您可以在开关配置的"目标人群”选项卡中管理 前置条件。

![Add prerequisites](/prerequisites.png)

在上述示例中，该开关配置了前置开关 campaign_percentage_rollout 的”true”分组，作为前置条件，也就是说，只有命中了前置开关 campaign_percentage_rollout 的”true”分组的用户，才能进入到该开关中。

## 前置开关处于打开状态时
如果前置开关处于打开状态，子开关选择前置开关的某个指定「分组」作为前置条件，则命中了前置开关指定分组的用户群体，才可以进入子开关中。

## 前提开关处于关闭状态或前置条件未满足时
如果前置开关处于关闭状态，或者目标对象未接收到前置开关的指定「分组」，则目标对象将接收前置开关的"当开关未生效”对应的分组。
例如，如果前置开关设置的是在关闭状态下提供"false”分组，即使在前置开关内部分规则指定的变体是"false"，当前置开关处于关闭状态时，FeatureProbe仍然认为前置条件未满足。

ps：
如果我使用用户ID调用toggle.getVariant，但用户不符合开关的前置开关条件，那么我将获得哪个分组？我如何知道前置开关条件未满足？
如果用户不符合开关的前置开关条件，您将获得该开关的「当开关未生效」的分组。这意味着您将接收开关的默认设置或配置规则所指定的分组。
您可以通过检查toggle.getVariant的返回值来确定前置开关条件是否满足。如果返回的是「当开关未生效」的分组，那么可以推断前置开关条件未满足。您还可以查看开关的配置或管理界面，了解前置开关的条件设置，以确定为什么条件未满足。

## 使用多个前置开关功能
功能开关可以依赖于多个前提开关。如果一个功能开关具有多个前置开关，那么FeatureProbe在对用户评估依赖关系时必须满足所有前置开关的要求。
FeatureProbe会自动阻止您保存可能引入前置条件之间循环依赖关系的更改。例如，您不能将Toggle A设为Toggle B的前置条件，并同时将Flag B设为Flag A的前置条件。

## 删除具有依赖关系的功能开关
您不能删除 作为 其他功能开关「前置条件」的开关。您必须先解除依赖关系，才能将其删除。
